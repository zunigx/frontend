<div class="login-container">
  <p-toast position="top-right"></p-toast>
  <p-card [style]="{'border-radius': '12px', 'box-shadow': '0 8px 24px rgba(0, 0, 0, 0.15)', 'background': 'linear-gradient(145deg, #ffffff, #f8fafc)'}">
    <ng-template #header>
      <div class="header-circle-container">
        <div class="user-icon-circle">
          <i class="pi pi-user user-icon"></i>
        </div>
      </div>
    </ng-template>

    <ng-template #title>
      <div class="login-title">Registro</div>
    </ng-template>

    <div class="form-fields" *ngIf="!qrCode">
      <div class="label">Nombre de usuario</div>
      <p-inputgroup>
        <p-inputgroup-addon [style]="{'background': '#f1f5f9', 'border-radius': '8px 0 0 8px'}">
          <i class="pi pi-user"></i>
        </p-inputgroup-addon>
        <input pInputText [(ngModel)]="username" placeholder="Nombre de usuario" [style]="{'width': '100%'}" />
      </p-inputgroup>

      <div class="label">Contraseña</div>
      <p-inputgroup>
        <p-inputgroup-addon [style]="{'background': '#f1f5f9', 'border-radius': '8px 0 0 8px'}">
          <i class="pi pi-lock"></i>
        </p-inputgroup-addon>
        <input pInputText type="password" [(ngModel)]="password" placeholder="Contraseña" [style]="{'width': '100%'}" />
      </p-inputgroup>

      <div class="label">Confirmar Contraseña</div>
      <p-inputgroup>
        <p-inputgroup-addon [style]="{'background': '#f1f5f9', 'border-radius': '8px 0 0 8px'}">
          <i class="pi pi-lock"></i>
        </p-inputgroup-addon>
        <input pInputText type="password" [(ngModel)]="confirmPassword" placeholder="Confirmar Contraseña" [style]="{'width': '100%'}" />
      </p-inputgroup>
    </div>

    <div class="form-fields" *ngIf="qrCode">
      <div class="label">Escanea este código QR con tu app de autenticación</div>
      <img [src]="qrCode" alt="Código QR para MFA" style="max-width: 200px; margin: 0 auto; display: block;" />
      <div class="label">O ingresa este secreto manualmente: {{ secret }}</div>
    </div>

    <ng-template #footer>
      <div class="login-buttons">
        <p-button
          label="Iniciar Sesión"
          severity="secondary"
          [outlined]="true"
          [style]="{'width': '45%'}"
          routerLink="/auth/login"
        ></p-button>
        <p-button
          *ngIf="!qrCode"
          (click)="register()"
          label="Registrarse"
          severity="info"
          [style]="{'width': '45%'}"
        ></p-button>
        <p-button
          *ngIf="qrCode"
          label="Continuar"
          severity="info"
          [style]="{'width': '45%'}"
          routerLink="/auth/login"
        ></p-button>
      </div>
    </ng-template>
  </p-card>
</div>
